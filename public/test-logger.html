<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logger Test</title>
    
    <!-- Polyfill for older browsers -->
    <script>
        // Ensure basic ES6 support
        if (typeof window !== 'undefined') {
            // Polyfill for older browsers
            if (!window.Promise) {
                window.Promise = function(executor) {
                    // Simple Promise polyfill
                    var self = this;
                    self.state = 'pending';
                    self.value = undefined;
                    self.reason = undefined;
                    self.onFulfilledCallbacks = [];
                    self.onRejectedCallbacks = [];
                    
                    function resolve(value) {
                        if (self.state === 'pending') {
                            self.state = 'fulfilled';
                            self.value = value;
                            self.onFulfilledCallbacks.forEach(function(callback) {
                                callback(value);
                            });
                        }
                    }
                    
                    function reject(reason) {
                        if (self.state === 'pending') {
                            self.state = 'rejected';
                            self.reason = reason;
                            self.onRejectedCallbacks.forEach(function(callback) {
                                callback(reason);
                            });
                        }
                    }
                    
                    try {
                        executor(resolve, reject);
                    } catch (e) {
                        reject(e);
                    }
                };
                
                window.Promise.prototype.then = function(onFulfilled, onRejected) {
                    var self = this;
                    var promise2 = new window.Promise(function(resolve, reject) {
                        if (self.state === 'fulfilled') {
                            setTimeout(function() {
                                try {
                                    var x = onFulfilled ? onFulfilled(self.value) : self.value;
                                    resolve(x);
                                } catch (e) {
                                    reject(e);
                                }
                            });
                        } else if (self.state === 'rejected') {
                            setTimeout(function() {
                                try {
                                    var x = onRejected ? onRejected(self.reason) : self.reason;
                                    resolve(x);
                                } catch (e) {
                                    reject(e);
                                }
                            });
                        } else {
                            self.onFulfilledCallbacks.push(function(value) {
                                setTimeout(function() {
                                    try {
                                        var x = onFulfilled ? onFulfilled(value) : value;
                                        resolve(x);
                                    } catch (e) {
                                        reject(e);
                                    }
                                });
                            });
                            self.onRejectedCallbacks.push(function(reason) {
                                setTimeout(function() {
                                    try {
                                        var x = onRejected ? onRejected(reason) : reason;
                                        resolve(x);
                                    } catch (e) {
                                        reject(e);
                                    }
                                });
                            });
                        }
                    });
                    return promise2;
                };
            }
        }
    </script>
    
    <!-- Error Handler for JavaScript Issues -->
    <script>
        // Catch any JavaScript errors and show user-friendly messages
        window.addEventListener('error', function(e) {
            console.error('JavaScript Error:', e.error);
            
            // Create a user-friendly error message
            var errorDiv = document.createElement('div');
            errorDiv.style.cssText = 'position:fixed;top:20px;right:20px;background:#ef4444;color:white;padding:16px;border-radius:8px;z-index:10000;max-width:400px;font-family:Arial,sans-serif;';
            errorDiv.innerHTML = '<strong>⚠️ Technical Issue</strong><br>Please refresh the page or contact support if the problem persists.';
            
            document.body.appendChild(errorDiv);
            
            // Remove after 10 seconds
            setTimeout(function() {
                if (errorDiv.parentNode) {
                    errorDiv.parentNode.removeChild(errorDiv);
                }
            }, 10000);
        });
        
        // Catch unhandled promise rejections
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled Promise Rejection:', e.reason);
            e.preventDefault(); // Prevent the default error
        });
    </script>
    
    <!-- Load the logger -->
    <script src="js/logger.js"></script>
</head>
<body>
    <h1>Logger Test Page</h1>
    <p>This page tests if the logger loads without syntax errors.</p>
    
    <button onclick="testLogger()">Test Logger</button>
    <button onclick="toggleDebug()">Toggle Debug Mode</button>
    
    <div id="output"></div>
    
    <script>
        function testLogger() {
            var output = document.getElementById('output');
            
            try {
                // Test if logger is available
                if (window.logger) {
                    output.innerHTML = '<p style="color: green;">✅ Logger loaded successfully!</p>';
                    
                    // Test logging methods
                    window.logger.log('Test log message');
                    window.logger.info('Test info message');
                    window.logger.warn('Test warning message');
                    window.logger.error('Test error message');
                    
                    output.innerHTML += '<p style="color: green;">✅ All logger methods working!</p>';
                } else {
                    output.innerHTML = '<p style="color: red;">❌ Logger not found!</p>';
                }
            } catch (error) {
                output.innerHTML = '<p style="color: red;">❌ Error testing logger: ' + error.message + '</p>';
                console.error('Logger test error:', error);
            }
        }
        
        // Auto-test when page loads
        window.addEventListener('load', function() {
            setTimeout(testLogger, 1000);
        });
    </script>
</body>
</html>
